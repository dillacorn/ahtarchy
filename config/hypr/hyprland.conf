#  ▄▄▄       █     █░▄▄▄█████▓ ▄▄▄       ██▀███   ▄████▄   ██░ ██▓██   ██▓
# ▒████▄    ▓█░ █ ░█░▓  ██▒ ▓▒▒████▄    ▓██ ▒ ██▒▒██▀ ▀█  ▓██░ ██▒▒██  ██▒
# ▒██  ▀█▄  ▒█░ █ ░█ ▒ ▓██░ ▒░▒██  ▀█▄  ▓██ ░▄█ ▒▒▓█    ▄ ▒██▀▀██░ ▒██ ██░
# ░██▄▄▄▄██ ░█░ █ ░█ ░ ▓██▓ ░ ░██▄▄▄▄██ ▒██▀▀█▄  ▒▓▓▄ ▄██▒░▓█ ░██  ░ ▐██▓░
#  ▓█   ▓██▒░░██▒██▓   ▒██▒ ░  ▓█   ▓██▒░██▓ ▒██▒▒ ▓███▀ ░░▓█▒░██▓ ░ ██▒▓░
#  ▒▒   ▓▒█░░ ▓░▒ ▒    ▒ ░░    ▒▒   ▓▒█░░ ▒▓ ░▒▓░░ ░▒ ▒  ░ ▒ ░░▒░▒  ██▒▒▒ 
#   ▒   ▒▒ ░  ▒ ░ ░      ░      ▒   ▒▒ ░  ░▒ ░ ▒░  ░  ▒    ▒ ░▒░ ░▓██ ░▒░ 
#   ░   ▒     ░   ░    ░        ░   ▒     ░░   ░ ░         ░  ░░ ░▒ ▒ ░░  
#       ░  ░    ░                   ░  ░   ░     ░ ░       ░  ░  ░░ ░     
#                                                 ░                ░ ░     

# github.com/dillacorn/awtarchy/tree/main/config/hypr
# ~/.config/hypr/hyprland.conf

# ───────────────────────────────────────────────────────────────────────────────
# MONITORS
# ───────────────────────────────────────────────────────────────────────────────

# list displays: hyprctl monitors
# example syntax: monitor=(name),(resolution@refresh),(position_0x0),(scale),(vrr,1/0 = enable/disable VRR)
# disable display example syntax: monitor=(name),disable

monitor=,preferred,auto,auto,vrr,0
monitor=Virtual-1,1600x900@60,auto,1,vrr,0

# ───────────────────────────────────────────────────────────────────────────────
# AUTOSTART
# ───────────────────────────────────────────────────────────────────────────────

exec-once = ~/.config/hypr/scripts/swww-wallpaper.sh
# exec-once = ~/.config/hypr/scripts/wallpaper_engine.sh
exec-once = ~/.config/hypr/scripts/waytrogen-settings.sh
# exec-once = ~/.config/hypr/scripts/miclock.sh
exec-once = gnome-keyring-daemon --start --password-store=secrets
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once = dbus-update-activation-environment --all
exec-once = sleep 1 && dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = hypridle -c ~/.config/hypr/hypridle.conf
exec-once = waybar &
exec-once = mako &
exec-once = nm-applet &
exec-once = blueman-applet &
exec-once = nwg-look -a &
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# ───────────────────────────────────────────────────────────────────────────────
# ENV
# ───────────────────────────────────────────────────────────────────────────────

env = XCURSOR_THEME,ComixCursors-White
env = XCURSOR_SIZE,24
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = WAYLAND_DISPLAY,wayland-1
env = QT_QPA_PLATFORM,wayland
env = QT_STYLE_OVERRIDE,kvantum
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT6CT_PLATFORM_PLUGIN,qt6ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = MOZ_ENABLE_WAYLAND,1
env = GDK_SCALE,1
env = GTK_THEME,Materia-dark
env = GAMESCOPE_WSI,vk_wayland

# Commented out section
# env = WLR_RENDERER_ALLOW_SOFTWARE,0
# env = WLR_DRM_NO_ATOMIC,1  # Can help with some GPUs
# env = HYPRLAND_NO_RT,1     # Disable realtime scheduling if having issues
# env = __GL_GSYNC_ALLOWED,1
# env = __GL_VRR_ALLOWED,1

# Commented out - For Nvidia GPUs
# env = __GLX_VENDOR_LIBRARY_NAME,nvidia  # If NVIDIA
# env = GBM_BACKEND,nvidia-drm  # If NVIDIA
# env = LIBVA_DRIVER_NAME,nvidia  # If NVIDIA

# ───────────────────────────────────────────────────────────────────────────────
# LOOK & FEEL
# ───────────────────────────────────────────────────────────────────────────────

general {
    gaps_in = 6
    gaps_out = 9
    border_size = 1
col.active_border = rgba(ebdbb2ff)
col.inactive_border = rgba(00000000)
    resize_on_border = true
    allow_tearing = true
    layout = dwindle
}

decoration {
    rounding = 8
    rounding_power = 2
    active_opacity = 1.0
    inactive_opacity = 1.0
    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }
    blur {
        enabled = true
        size = 3
        passes = 1
        vibrancy = 0.1696
    }
}

animations {
    enabled = yes
    bezier = easeOutQuint, 0.23, 1, 0.32, 1
    bezier = easeInOutSlight, 0.4, 0.1, 0.2, 1
    bezier = linear, 0, 0, 1, 1
    bezier = softFade, 0.2, 0.5, 0.3, 1
    bezier = fastOut, 0.2, 0, 0.6, 1
    animation = global, 1, 8, default
    animation = border, 1, 3.0, easeOutQuint
    animation = borderangle, 1, 40, linear, once
    animation = windows, 1, 3.0, easeOutQuint
    animation = windowsIn, 1, 2.0, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.5, linear, popin 87%
    animation = fadeIn, 1, 1.5, softFade
    animation = fadeOut, 1, 1.3, softFade
    animation = fade, 1, 2.0, softFade
    animation = layers, 1, 2.5, easeInOutSlight
    animation = layersIn, 1, 2.0, easeInOutSlight, fade
    animation = layersOut, 1, 1.5, fastOut, fade
    animation = fadeLayersIn, 1, 1.4, softFade
    animation = fadeLayersOut, 1, 1.3, softFade
    animation = workspaces, 1, 1.8, easeInOutSlight, fade
    animation = workspacesIn, 1, 1.3, softFade, fade
    animation = workspacesOut, 1, 1.4, softFade, fade
    animation = specialWorkspace, 1, 1.9, easeInOutSlight, fade
}

dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 0
    # single_window_aspect_ratio = 1 0.6852
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = true
    disable_splash_rendering = true
    middle_click_paste = false
    vfr = true
}

xwayland {
    force_zero_scaling = true
}

# ───────────────────────────────────────────────────────────────────────────────
# INPUT
# ───────────────────────────────────────────────────────────────────────────────

input {
    kb_layout = us
    follow_mouse = 1
    repeat_delay = 250
    repeat_rate = 35
    numlock_by_default = true
    touchpad {
        natural_scroll = true
        disable_while_typing = true
        clickfinger_behavior = true
        scroll_factor = 0.5
    }
    
    # Mouse: No acceleration (1:1 raw input)
    accel_profile = flat
    sensitivity = 0
    force_no_accel = 1
    
    # ──────────────────────────────────────────────────────────────
    # Game profiles @ 400 DPI w/ maccel
    # ──────────────────────────────────────────────────────────────
    
    # CS2 (Tactical - no accel)
    # Sens: 2.0
    # Style: Precise, consistent aim for tac shooters
    # maccel: Use "No Accel" mode with SENS_MULT 0.40 (400 DPI)
    
    # The Finals (Arena - with accel)
    # Hardware mouse DPI:    1600           # Hardware DPI of mouse
    # Base sens:             35             # Precise tracking
    # Fast sens:             47             # flicks / movement
    # Accel ratio:           47/35 = 1.34   # fast/base = ratio value
    # maccel setup:
    #   - Mode: Linear
    #   - SENS_MULT:         0.40    # 400 DPI feel
    #   - Y/x Ratio:         1.0     # 1.2 on 4/3 stretched / 1.1 on 16:10 stretched
    #   - INPUT_DPI:         1600    # must match hardware DPI
    #   - Angle Rotation:    0.0     # personal preference
    #   - Accel:             7       # no diff past 7 in graph
    #   - Offset:            15      # accel activation threshold (mouse speed)
    #   - OutputCap:         1.34    # example varies between games
    
    # ──────────────────────────────────────────────────────────────
    # maccel setup guide
    # https://github.com/Gnarus-G/maccel
    #
    # How to calculate your OutputCap: (value varies between all games)
    # 1. Play without accel - find your comfortable "fast" sens (e.g., 47)
    # 2. Find the "slow" sens you want for precision (e.g., 35)
    # 3. Calculate: OutputCap = fast_sens / slow_sens
    #    Example: 47 / 35 = 1.34
    #
    # Result: Slow movements = 35 sens, fast flicks = 47 sens
    # (Game Example: The Finals)
    #
    # ──────────────────────────────────────────────────────────────
}

# ───────────────────────────────────────────────────────────────────────────────
# GESTURES
# ───────────────────────────────────────────────────────────────────────────────

# See https://wiki.hypr.land/Configuring/Gestures
gesture = 3, horizontal, workspace

# ───────────────────────────────────────────────────────────────────────────────
# MODIFIERS
# ───────────────────────────────────────────────────────────────────────────────

$mod      = ALT
$super    = SUPER
$tempalt  = ALT     # default modifier is ALT; in noalt submap ALT is disabled

# ───────────────────────────────────────────────────────────────────────────────
# LAUNCHERS (handlers)
# ───────────────────────────────────────────────────────────────────────────────

$wofi                  = ~/.config/hypr/scripts/launch_handler.sh wofi "wofi --drun"
$wiremix               = ~/.config/hypr/scripts/launch_handler.sh wiremix "alacritty --class Wiremix -e wiremix"
$pavucontrol           = ~/.config/hypr/scripts/launch_handler.sh pavucontrol "pavucontrol"
$pulsemixer            = ~/.config/hypr/scripts/launch_handler.sh pulsemixer "alacritty --class Pulsemixer -e pulsemixer"
$wlogout               = ~/.config/hypr/scripts/wlogout-toggle.sh
$waytrogen             = ~/.config/hypr/scripts/waytrogen_launcher.sh
$maccel                = ~/.config/hypr/scripts/launch_handler.sh maccel "alacritty --class maccel -e maccel"
$waybar                = sh -c 'if pgrep -x waybar >/dev/null; then pkill -x waybar && echo waybar_not_running > /tmp/waybar.state; else (waybar & echo waybar_running > /tmp/waybar.state); fi'
$toggle_animations     = ~/.config/hypr/scripts/toggle_animations.sh
$qr_code_scan          = ~/.config/hypr/scripts/qr-scan.sh
$select_theme          = ~/.config/hypr/scripts/select_theme.sh
$screenshot_select     = env XDG_ACTIVATION_TOKEN=$XDG_ACTIVATION_TOKEN ~/.config/hypr/scripts/screenshot_area.sh
$screenshot_full       = ~/.config/hypr/scripts/screenshot_fullscreen.sh
$screenshot_display    = ~/.config/hypr/scripts/screenshot_output.sh
$gif_capture           = ~/.config/hypr/scripts/gif.sh
$clipboard_history     = ~/.config/hypr/scripts/cliphist-wofi.sh
$yazi                  = alacritty -e yazi
$btop                  = alacritty -e btop
$htop                  = alacritty -e htop
$workspace_mix         = ~/.config/hypr/scripts/workspace-mix.sh
$zoom                  = ~/.config/hypr/scripts/zoom.sh
$play_pause            = ~/.config/hypr/scripts/play_pause.sh
$mute_unmute           = wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
$hyprpicker            = hyprpicker -a -f hex
$mako_dismiss          = ~/.config/hypr/scripts/mako_dismiss.sh
$web-browser           = firefox

# Submap references    (Toggle on)
$noalt_on              = sh -c 'notify-send -a Hyprland -t 1000 "noalt mode: ON"; hyprctl dispatch submap noalt'
$mouse_on              = sh -c 'notify-send -a Hyprland -t 1000 "mouse mode: ON"; hyprctl dispatch submap mouse'
$vm_on                 = sh -c 'notify-send -a Hyprland -t 1000 "vm mode: ON"; hyprctl dispatch submap vm'

# ───────────────────────────────────────────────────────────────────────────────
# DEFAULT MODE (ALT is modifier; SUPER is app/meta)
# ───────────────────────────────────────────────────────────────────────────────

# ALT & SUPER apps
bind  = $mod,   P,              exec, $wofi
bind  = $super, D,              exec, $wofi
bind  = $mod,   V,              exec, $wiremix
bind  = $super, V,              exec, $wiremix
bind  = $mod    SHIFT, RETURN,  exec, alacritty
bind  = $super  SHIFT, RETURN,  exec, alacritty
bind  = $super, RETURN,         exec, alacritty
bind  = $mod    SHIFT, B,       exec, $btop
bind  = $super  SHIFT, B,       exec, $btop
bind  = $mod    SHIFT, C,       exec, speedcrunch
bind  = $super  SHIFT, C,       exec, speedcrunch
bind  = $super  SHIFT, M,       exec, $maccel
bind  = $mod    SHIFT, M,       exec, $maccel
binde = $mod,   SPACE,          exec, $mako_dismiss
binde = $super, SPACE,          exec, $mako_dismiss

# SUPER apps
bind = $super, E,               exec, pcmanfm-qt
bind = $super SHIFT, E,         exec, $yazi
bind = $super, L,               exec, hyprlock
bind = $super, I,               exec, $hyprpicker
bind = $super, P,               exec, $wlogout
bind = $super, W,               exec, $waytrogen
bind = $super, B,               exec, $web-browser
bind = $super CTRL, B,          exec, $waybar
bind = $super, A,               exec, $toggle_animations
bind = $super, T,               exec, $select_theme
bind = $super, C,               exec, $clipboard_history
bind = $super, S,               exec, $qr_code_scan
bind = $super $mod CTRL, S,     exec, $qr_code_scan
bind = $super SHIFT, S,         exec, $screenshot_select
bind = $super $mod,  S,         exec, $screenshot_select
bind = $super SHIFT, F,         exec, $screenshot_full
bind = $super $mod,  F,         exec, $screenshot_full
bind = $super SHIFT, D,         exec, $screenshot_display
bind = $super $mod,  D,         exec, $screenshot_display
bind = $super SHIFT, G,         exec, $gif_capture
bind = $super $mod,  G,         exec, $gif_capture

# Window management
bind = $super, Q,          killactive
bind = $super SHIFT, Q,    killactive
bind = $mod, Q,            killactive
bind = $mod SHIFT, Q,      killactive
bind = $mod, F4,           killactive
bind = $super $mod, Q,     exec, hyprctl kill
bind = $mod, Y,            pin
bind = $super, Y,          pin
bind = $tempalt, R,        layoutmsg, swapsplit
bind = $tempalt SHIFT, R,  layoutmsg, togglesplit
bind = $super, R,          layoutmsg, swapsplit
bind = $super SHIFT, R,    layoutmsg, togglesplit
bind = $tempalt, F,        togglefloating
bind = $tempalt CTRL, F,   fullscreen
bind = $super, F,          togglefloating
bind = $super CTRL, F,     fullscreen
bind = $mod, TAB,          cyclenext
bind = $mod, TAB,          bringactivetotop
bind = $mod SHIFT, TAB,    cyclenext, prev

# Focus move (ALT/SUPER arrows)
bind = $tempalt, left,   movefocus, l
bind = $tempalt, right,  movefocus, r
bind = $tempalt, up,     movefocus, u
bind = $tempalt, down,   movefocus, d
bind = $super, left,       movefocus, l
bind = $super, right,      movefocus, r
bind = $super, up,         movefocus, u
bind = $super, down,       movefocus, d
# ALT/SUPER hjkl
bind = $tempalt, h,      movefocus, l
bind = $tempalt, j,      movefocus, d
bind = $tempalt, k,      movefocus, u
bind = $tempalt, l,      movefocus, r
bind = $super, h,          movefocus, l
bind = $super, j,          movefocus, d
bind = $super, k,          movefocus, u
bind = $super, l,          movefocus, r

# Window move (ALT/SUPER+SHIFT arrows)
bind = $tempalt SHIFT, left,   movewindow, l
bind = $tempalt SHIFT, right,  movewindow, r
bind = $tempalt SHIFT, up,     movewindow, u
bind = $tempalt SHIFT, down,   movewindow, d
bind = $super SHIFT, left,       movewindow, l
bind = $super SHIFT, right,      movewindow, r
bind = $super SHIFT, up,         movewindow, u
bind = $super SHIFT, down,       movewindow, d
# ALT/SUPER+SHIFT hjkl
bind = $tempalt SHIFT, h,      movewindow, l
bind = $tempalt SHIFT, j,      movewindow, d
bind = $tempalt SHIFT, k,      movewindow, u
bind = $tempalt SHIFT, l,      movewindow, r
bind = $super SHIFT, h,          movewindow, l
bind = $super SHIFT, j,          movewindow, d
bind = $super SHIFT, k,          movewindow, u
bind = $super SHIFT, l,          movewindow, r

# Send current workspace to monitor (ALT/SUPER+CTRL+SHIFT numbers)
bind = $tempalt CTRL SHIFT, left,   movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, right,  movecurrentworkspacetomonitor, +1
bind = $tempalt CTRL SHIFT, up,     movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, down,   movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, left,       movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, right,      movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, up,         movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, down,       movecurrentworkspacetomonitor, +1
# ALT/SUPER+CTRL+SHIFT "[" or "]"
bind = $tempalt CTRL SHIFT, bracketleft,   movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, bracketright,  movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, bracketleft,       movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, bracketright,      movecurrentworkspacetomonitor, +1

# Workspaces (ALT/SUPER numbers)
bind = $tempalt, 1,  workspace, 1
bind = $tempalt, 2,  workspace, 2
bind = $tempalt, 3,  workspace, 3
bind = $tempalt, 4,  workspace, 4
bind = $tempalt, 5,  workspace, 5
bind = $tempalt, 6,  workspace, 6
bind = $tempalt, 7,  workspace, 7
bind = $tempalt, 8,  workspace, 8
bind = $tempalt, 9,  workspace, 9
bind = $tempalt, 0,  workspace, 10
bind = $super, 1,      workspace, 1
bind = $super, 2,      workspace, 2
bind = $super, 3,      workspace, 3
bind = $super, 4,      workspace, 4
bind = $super, 5,      workspace, 5
bind = $super, 6,      workspace, 6
bind = $super, 7,      workspace, 7
bind = $super, 8,      workspace, 8
bind = $super, 9,      workspace, 9
bind = $super, 0,      workspace, 10

# Prev/next workspace with (ALT/SUPER "[" or "]")
bind = $tempalt, bracketleft,   workspace, -1
bind = $tempalt, bracketright,  workspace, +1
bind = $super, bracketleft,       workspace, -1
bind = $super, bracketright,      workspace, +1

# Move window to workspace (ALT/SUPER+SHIFT numbers)
bind = $tempalt SHIFT, 1,  movetoworkspacesilent, 1
bind = $tempalt SHIFT, 2,  movetoworkspacesilent, 2
bind = $tempalt SHIFT, 3,  movetoworkspacesilent, 3
bind = $tempalt SHIFT, 4,  movetoworkspacesilent, 4
bind = $tempalt SHIFT, 5,  movetoworkspacesilent, 5
bind = $tempalt SHIFT, 6,  movetoworkspacesilent, 6
bind = $tempalt SHIFT, 7,  movetoworkspacesilent, 7
bind = $tempalt SHIFT, 8,  movetoworkspacesilent, 8
bind = $tempalt SHIFT, 9,  movetoworkspacesilent, 9
bind = $tempalt SHIFT, 0,  movetoworkspacesilent, 10
bind = $super SHIFT, 1,      movetoworkspacesilent, 1
bind = $super SHIFT, 2,      movetoworkspacesilent, 2
bind = $super SHIFT, 3,      movetoworkspacesilent, 3
bind = $super SHIFT, 4,      movetoworkspacesilent, 4
bind = $super SHIFT, 5,      movetoworkspacesilent, 5
bind = $super SHIFT, 6,      movetoworkspacesilent, 6
bind = $super SHIFT, 7,      movetoworkspacesilent, 7
bind = $super SHIFT, 8,      movetoworkspacesilent, 8
bind = $super SHIFT, 9,      movetoworkspacesilent, 9
bind = $super SHIFT, 0,      movetoworkspacesilent, 10

# Resize (ALT/SUPER+CTRL arrows / hold)
binde = $tempalt CTRL, right,  resizeactive, 30 0
binde = $tempalt CTRL, left,   resizeactive, -30 0
binde = $tempalt CTRL, up,     resizeactive, 0 -30
binde = $tempalt CTRL, down,   resizeactive, 0 30
binde = $super CTRL, right,      resizeactive, 30 0
binde = $super CTRL, left,       resizeactive, -30 0
binde = $super CTRL, up,         resizeactive, 0 -30
binde = $super CTRL, down,       resizeactive, 0 30
# ALT/SUPER+CTRL hjkl
binde = $tempalt CTRL, h,      resizeactive, -30 0
binde = $tempalt CTRL, j,      resizeactive, 0 30
binde = $tempalt CTRL, k,      resizeactive, 0 -30
binde = $tempalt CTRL, l,      resizeactive, 30 0
binde = $super CTRL, h,          resizeactive, -30 0
binde = $super CTRL, j,          resizeactive, 0 30
binde = $super CTRL, k,          resizeactive, 0 -30
binde = $super CTRL, l,          resizeactive, 30 0

# Mouse (ALT/SUPER mouse-left/right / hold)
bindm = $tempalt, mouse:272,  movewindow
bindm = $tempalt, mouse:273,  resizewindow
bindm = $super, mouse:272,      movewindow
bindm = $super, mouse:273,      resizewindow

# Workspace mixing script (SUPER+ALT+CTRL numbers)
bind = $super $mod CTRL, 1,    exec, $workspace_mix toggle 1
bind = $super $mod CTRL, 2,    exec, $workspace_mix toggle 2
bind = $super $mod CTRL, 3,    exec, $workspace_mix toggle 3
bind = $super $mod CTRL, 4,    exec, $workspace_mix toggle 4
bind = $super $mod CTRL, 5,    exec, $workspace_mix toggle 5
bind = $super $mod CTRL, 6,    exec, $workspace_mix toggle 6
bind = $super $mod CTRL, 7,    exec, $workspace_mix toggle 7
bind = $super $mod CTRL, 8,    exec, $workspace_mix toggle 8
bind = $super $mod CTRL, 9,    exec, $workspace_mix toggle 9
bind = $super $mod CTRL, 0,    exec, $workspace_mix toggle 10
bind = $super $mod CTRL, F,    exec, $workspace_mix focus
bind = $super $mod CTRL, R,    exec, $workspace_mix restore

# Zoom script (SUPER +/-)
binde = $super, equal,        exec, $zoom +
binde = $super, minus,        exec, $zoom -
binde = $super SHIFT, equal,  exec, $zoom ++
binde = $super SHIFT, minus,  exec, $zoom --
bind  = $super, backspace,    exec, $zoom reset
bind  = $super, backslash,    exec, $zoom rigid
binde = $super CTRL, equal,   exec, $zoom + step:5%
binde = $super CTRL, minus,   exec, $zoom - step:5%

# Scratchpad (SUPER+x,X)
bind = $super, X,        togglespecialworkspace, magic
bind = $super SHIFT, X,  movetoworkspace, special:magic

# Misc (SUPER+F12)
bind = $super,      F12,  exec, sh -c 'ver=$(hyprctl version | awk "/^Hyprland /{print \$2; exit}"); [ -z \"$ver\" ] && ver=\"unknown\"; notify-send "Hyprland Version" "$ver"'
bind = $super CTRL, F12,  exec, notify-send "Debug" "$(hyprctl activewindow -j | jq -r '.class, .title')"

# Media & Brightness
bindel = ,XF86AudioRaiseVolume,   exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume,   exec, wpctl set-volume      @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,          exec, wpctl set-mute        @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute,       exec, wpctl set-mute        @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp,    exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown,  exec, brightnessctl -e4 -n2 set 5%-
bind   = $super, M,               exec, $mute_unmute
bindl  = ,XF86AudioPlay,          exec, $play_pause
bindl  = ,XF86AudioNext,          exec, playerctl next
bindl  = ,XF86AudioPrev,          exec, playerctl previous

# Submap binds                (Toggle on/off)
bind = $super $mod, N,        exec, $noalt_on
bind = $super, N,             exec, $noalt_on
bind = $super $mod, M,        exec, $mouse_on
bind = $super $mod, V,        exec, $vm_on

# ───────────────────────────────────────────────────────────────────────────────
# noalt SUBMAP; alt is disabled for most tasks
# ───────────────────────────────────────────────────────────────────────────────

submap = noalt

# Submap references in "noalt"   (Toggle off/on)
$noalt_off   = sh -c 'notify-send -a Hyprland -t 1000 "noalt mode: OFF"; hyprctl dispatch submap reset'
$mouse_on    = sh -c 'notify-send -a Hyprland -t 1000 "mouse mode: ON"; hyprctl dispatch submap mouse'
$vm_on       = sh -c 'notify-send -a Hyprland -t 1000 "vm mode: ON"; hyprctl dispatch submap vm'

# ALT & SUPER apps in "noalt"
bind  = $mod,   P,              exec, $wofi
bind  = $super, D,              exec, $wofi
bind  = $mod,   V,              exec, $wiremix
bind  = $super, V,              exec, $wiremix
bind  = $mod    SHIFT, RETURN,  exec, alacritty
bind  = $super  SHIFT, RETURN,  exec, alacritty
bind  = $super, RETURN,         exec, alacritty
bind  = $mod    SHIFT, B,       exec, $btop
bind  = $super  SHIFT, B,       exec, $btop
bind  = $mod    SHIFT, C,       exec, speedcrunch
bind  = $super  SHIFT, C,       exec, speedcrunch
bind  = $super  SHIFT, M,       exec, $maccel
bind  = $mod    SHIFT, M,       exec, $maccel
binde = $mod,   SPACE,          exec, $mako_dismiss
binde = $super, SPACE,          exec, $mako_dismiss

# SUPER apps in "noalt"
bind = $super, E,               exec, pcmanfm-qt
bind = $super SHIFT, E,         exec, $yazi
bind = $super, L,               exec, hyprlock
bind = $super, I,               exec, $hyprpicker
bind = $super, P,               exec, $wlogout
bind = $super, W,               exec, $waytrogen
bind = $super, B,               exec, $web-browser
bind = $super CTRL, B,          exec, $waybar
bind = $super, A,               exec, $toggle_animations
bind = $super, T,               exec, $select_theme
bind = $super, C,               exec, $clipboard_history
bind = $super, S,               exec, $qr_code_scan
bind = $super $mod CTRL, S,     exec, $qr_code_scan
bind = $super SHIFT, S,         exec, $screenshot_select
bind = $super $mod,  S,         exec, $screenshot_select
bind = $super SHIFT, F,         exec, $screenshot_full
bind = $super $mod,  F,         exec, $screenshot_full
bind = $super SHIFT, D,         exec, $screenshot_display
bind = $super $mod,  D,         exec, $screenshot_display
bind = $super SHIFT, G,         exec, $gif_capture
bind = $super $mod,  G,         exec, $gif_capture

# Window management in "noalt"
bind = $super, Q,        killactive
bind = $super SHIFT, Q,  killactive
bind = $mod, F4,         killactive
bind = $super $mod, Q,   exec, hyprctl kill
bind = $super, Y,        pin
bind = $super SHIFT, R,  layoutmsg, togglesplit
bind = $super, R,        layoutmsg, swapsplit
bind = $super, F,        togglefloating
bind = $super CTRL, F,   fullscreen
bind = $mod, TAB,        cyclenext
bind = $mod, TAB,        bringactivetotop
bind = $mod SHIFT, TAB,  cyclenext, prev

# Focus move in "noalt" (SUPER arrows)
bind = $super, left,   movefocus, l
bind = $super, right,  movefocus, r
bind = $super, up,     movefocus, u
bind = $super, down,   movefocus, d
# SUPER hjkl
bind = $super, h,      movefocus, l
bind = $super, j,      movefocus, d
bind = $super, k,      movefocus, u
bind = $super, l,      movefocus, r

# Window move in "noalt" (SUPER+SHIFT arrows)
bind = $super SHIFT, left,   movewindow, l
bind = $super SHIFT, right,  movewindow, r
bind = $super SHIFT, up,     movewindow, u
bind = $super SHIFT, down,   movewindow, d
# SUPER+SHIFT hjkl
bind = $super SHIFT, h,      movewindow, l
bind = $super SHIFT, j,      movewindow, d
bind = $super SHIFT, k,      movewindow, u
bind = $super SHIFT, l,      movewindow, r

# Send current workspace to monitor in "noalt" (SUPER+CTRL+SHIFT numbers)
bind = $super CTRL SHIFT, left,          movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, right,         movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, up,            movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, down,          movecurrentworkspacetomonitor, +1
# SUPER+CTRL+SHIFT "[" or "]"
bind = $super CTRL SHIFT, bracketleft,   movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, bracketright,  movecurrentworkspacetomonitor, +1

# Workspaces in "noalt" (SUPER numbers)
bind = $super, 1,  workspace, 1
bind = $super, 2,  workspace, 2
bind = $super, 3,  workspace, 3
bind = $super, 4,  workspace, 4
bind = $super, 5,  workspace, 5
bind = $super, 6,  workspace, 6
bind = $super, 7,  workspace, 7
bind = $super, 8,  workspace, 8
bind = $super, 9,  workspace, 9
bind = $super, 0,  workspace, 10

# Prev/next workspace with (SUPER "[" or "]")
bind = $super, bracketleft,   workspace, -1
bind = $super, bracketright,  workspace, +1

# Move window to workspace in "noalt" (SUPER+SHIFT numbers)
bind = $super SHIFT, 1,  movetoworkspacesilent, 1
bind = $super SHIFT, 2,  movetoworkspacesilent, 2
bind = $super SHIFT, 3,  movetoworkspacesilent, 3
bind = $super SHIFT, 4,  movetoworkspacesilent, 4
bind = $super SHIFT, 5,  movetoworkspacesilent, 5
bind = $super SHIFT, 6,  movetoworkspacesilent, 6
bind = $super SHIFT, 7,  movetoworkspacesilent, 7
bind = $super SHIFT, 8,  movetoworkspacesilent, 8
bind = $super SHIFT, 9,  movetoworkspacesilent, 9
bind = $super SHIFT, 0,  movetoworkspacesilent, 10

# Resize in "noalt" (SUPER+CTRL arrows / hold)
binde = $super CTRL, right,  resizeactive, 30 0
binde = $super CTRL, left,   resizeactive, -30 0
binde = $super CTRL, up,     resizeactive, 0 -30
binde = $super CTRL, down,   resizeactive, 0 30
# SUPER+CTRL hjkl
binde = $super CTRL, h,      resizeactive, -30 0
binde = $super CTRL, j,      resizeactive, 0 30
binde = $super CTRL, k,      resizeactive, 0 -30
binde = $super CTRL, l,      resizeactive, 30 0

# Mouse in "noalt" (SUPER mouse-left/right / hold)
bindm = $super, mouse:272,  movewindow
bindm = $super, mouse:273,  resizewindow

# Workspace mixing script (SUPER+ALT+CTRL numbers)
bind = $super $mod CTRL, 1,    exec, $workspace_mix toggle 1
bind = $super $mod CTRL, 2,    exec, $workspace_mix toggle 2
bind = $super $mod CTRL, 3,    exec, $workspace_mix toggle 3
bind = $super $mod CTRL, 4,    exec, $workspace_mix toggle 4
bind = $super $mod CTRL, 5,    exec, $workspace_mix toggle 5
bind = $super $mod CTRL, 6,    exec, $workspace_mix toggle 6
bind = $super $mod CTRL, 7,    exec, $workspace_mix toggle 7
bind = $super $mod CTRL, 8,    exec, $workspace_mix toggle 8
bind = $super $mod CTRL, 9,    exec, $workspace_mix toggle 9
bind = $super $mod CTRL, 0,    exec, $workspace_mix toggle 10
bind = $super $mod CTRL, F,    exec, $workspace_mix focus
bind = $super $mod CTRL, R,    exec, $workspace_mix restore

# Zoom script in "noalt" (SUPER +/-)
binde = $super, equal,        exec, $zoom +
binde = $super, minus,        exec, $zoom -
binde = $super SHIFT, equal,  exec, $zoom ++
binde = $super SHIFT, minus,  exec, $zoom --
bind  = $super, backspace,    exec, $zoom reset
bind  = $super, backslash,    exec, $zoom rigid
binde = $super CTRL, equal,   exec, $zoom + step:5%
binde = $super CTRL, minus,   exec, $zoom - step:5%

# Scratchpad in "noalt" (SUPER+x,X)
bind = $super, X,        togglespecialworkspace, magic
bind = $super SHIFT, X,  movetoworkspace, special:magic

# Misc in "noalt" (SUPER+F12)
bind = $super,      F12,  exec, sh -c 'ver=$(hyprctl version | awk "/^Hyprland /{print \$2; exit}"); [ -z \"$ver\" ] && ver=\"unknown\"; notify-send "Hyprland Version" "$ver"'
bind = $super CTRL, F12,  exec, notify-send "Debug" "$(hyprctl activewindow -j | jq -r '.class, .title')"

# Media & Brightness in "noalt"
bindel = ,XF86AudioRaiseVolume,   exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume,   exec, wpctl set-volume      @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,          exec, wpctl set-mute        @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute,       exec, wpctl set-mute        @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp,    exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown,  exec, brightnessctl -e4 -n2 set 5%-
bind  = $super, M,                exec, $mute_unmute
bindl = ,XF86AudioPlay,           exec, $play_pause
bindl = ,XF86AudioNext,           exec, playerctl next
bindl = ,XF86AudioPrev,           exec, playerctl previous

# Submap binds in "noalt"     (Toggle off/on)
bind = $super $mod, N,        exec, $noalt_off
bind = $super, N,             exec, $noalt_off
bind = $super $mod, M,        exec, $mouse_on
bind = $super $mod, V,        exec, $vm_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# MOUSE SUBMAP
# ───────────────────────────────────────────────────────────────────────────────

submap = mouse

# Submap references in "mouse"  (Toggle off)
$mouse_off = sh -c 'notify-send -a Hyprland -t 1000 "mouse mode: OFF"; hyprctl dispatch submap reset'

# Resize (MOUSE-left/right / hold)
binde = , h,               resizeactive, -30 0
binde = , j,               resizeactive, 0 30
binde = , k,               resizeactive, 0 -30
binde = , l,               resizeactive, 30 0
binde = , left,            resizeactive, -30 0
binde = , down,            resizeactive, 0 30
binde = , up,              resizeactive, 0 -30
binde = , right,           resizeactive, 30 0
bindm = , mouse:272,       movewindow
bindm = , mouse:273,       resizewindow
bind  = , mouse:274,       togglefloating
bind  = , Escape,          exec, $mouse_off reset
bind  = , Return,          exec, $mouse_off reset

# Submap binds in "mouse"  (Toggle off/on)
bind = $super $mod, M,     exec, $mouse_off
bind = $super $mod, N,     exec, $noalt_on
bind = $super, N,          exec, $noalt_on
bind = $super $mod, V,     exec, $vm_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# VIRTUAL MACHINE SUBMAP
# ───────────────────────────────────────────────────────────────────────────────

submap = vm

# Submap references in "vm"   (Toggle off)
$vm_off = sh -c 'notify-send -a Hyprland -t 1000 "vm mode: OFF"; hyprctl dispatch submap reset'

# Binds
bind = $super $mod CTRL, S,   exec, $qr_code_scan
bind = $super $mod, S,        exec, $screenshot_select
bind = $super $mod, F,        exec, $screenshot_full
bind = $super $mod, D,        exec, $screenshot_display
bind = $super $mod, G,        exec, $gif_capture
binde = $mod, SPACE,          exec, $mako_dismiss
binde = $super, SPACE,        exec, $mako_dismiss

# Submap binds in "vm"    (Toggle off/on)
bind = $super $mod, V,    exec, $vm_off
bind = $super $mod, M,    exec, $mouse_on
bind = $super $mod, N,    exec, $noalt_on
bind = $super, N,         exec, $noalt_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# RULES
# ───────────────────────────────────────────────────────────────────────────────

$games = ^(steam_app_.*|lutris_game_class|minigalaxy|playnite_game_class|gamescope|chiaki|moonlight|com\.moonlight_stream\.Moonlight|.*[Ww]ine.*)$
windowrulev2 = workspace 1 silent,    class:$games
windowrulev2 = noanim,                class:$games
windowrulev2 = noblur,                class:$games
windowrulev2 = noshadow,              class:$games
windowrulev2 = noborder,              class:$games
windowrulev2 = rounding 0,            class:$games
windowrulev2 = fullscreen,            class:$games
windowrulev2 = immediate,             class:$games

windowrulev2 = workspace 2 silent,    class:^(firefox|librewolf|Mullvad Browser|Cromite|brave-browser|io.github.ungoogled_software.ungoogled_chromium)$
windowrulev2 = workspace 3 silent,    class:^(discord|com.discordapp.Discord|vesktop|dev.vencord.Vesktop|brave-app.revolt.chat__-.*|chat.revolt.RevoltDesktop|info.mumble.Mumble)$
windowrulev2 = workspace 4 silent,    class:^(steam|com.valvesoftware.Steam|net.lutris.Lutris|itch|io.itch.itch|heroic|com.heroicgameslauncher.hgl|r2modman)$
windowrulev2 = workspace 5 silent,    class:^(Spotify|com.spotify.Client|brave-music.youtube.com__-.*)$
windowrulev2 = workspace 5 silent,    title:^(.*YouTube Music.*)$
windowrulev2 = workspace 6 silent,    class:^(org.telegram.desktop|brave-web.telegram.org__a_-.*|brave-messages.google.com__-.*)$
windowrulev2 = workspace 6 silent,    title:^(Telegram Web)$
windowrulev2 = workspace 6 silent,    class:^(Messages)$
windowrulev2 = workspace 6 silent,    class:^(Telegram)$
windowrulev2 = workspace 7 silent,    class:^(Vncviewer|rustdesk)$
windowrulev2 = workspace 8 silent,    class:^(com.github.IsmaelMartinez.teams_for_linux)$
windowrulev2 = workspace 9 silent,    class:^(kdenlive|org.kde.kdenlive|org.shotcut.Shotcut|krita|org.kde.krita)$
windowrulev2 = workspace 10 silent,   class:^(obs|com\.obsproject\.Studio|gpu-screen-recorder|gpu-screen-recorder-gtk|gpu-screen-recorder-ui|gsr-ui|com\.dec05eba\.gpu_screen_recorder)$

windowrule = suppressevent maximize,  class:.*
windowrule = nofocus,                 class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
windowrulev2 = noblur,                xwayland:1
windowrulev2 = stayfocused,           title:^()$,class:^(steam)$
windowrulev2 = minsize 1 1,           title:^()$,class:^(steam)$

# Picture-in-Picture
windowrulev2 = float,                 title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = keepaspectratio,       title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = move 73% 72%,          title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = size 25%,              title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = pin,                   title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# Dialogs float+center
windowrulev2 = center,                title:^(Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload)(.*)$
windowrulev2 = float,                 title:^(Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload)(.*)$

# Transparency
windowrulev2 = opacity 0.85 0.85,     class:^(wofi)$
windowrulev2 = opacity 0.85 0.85,     class:^(Spotify)$
windowrulev2 = opacity 0.85 0.85,     title:^(YouTube Music|YouTube Music - .+ - YouTube Music|YouTube Music - 1. YouTube Music)$
windowrulev2 = opacity 0.85 0.85,     class:^(com.github.th_ch.youtube_music|brave-music.youtube.com__-.*)$
windowrulev2 = opacity 0.95 0.95,     class:^(pcmanfm-qt|localsend|org.Waytrogen.Waytrogen|waytrogen|org.pulseaudio.pavucontrol|org.speedcrunch.speedcrunch|net.davidotek.pupgui2)$

# Float + size + center
windowrulev2 = float,                 class:org.speedcrunch.speedcrunch
windowrulev2 = size 15% 55%,          class:org.speedcrunch.speedcrunch
windowrulev2 = center,                class:org.speedcrunch.speedcrunch

windowrulev2 = float,                 class:org.pulseaudio.pavucontrol
windowrulev2 = size 55% 70%,          class:org.pulseaudio.pavucontrol
windowrulev2 = center,                class:org.pulseaudio.pavucontrol

windowrulev2 = float,                 class:^(Pulsemixer)$
windowrulev2 = size 55% 70%,          class:^(Pulsemixer)$
windowrulev2 = center,                class:^(Pulsemixer)$

windowrulev2 = float,                 class:^(Wiremix)$
windowrulev2 = size 55% 70%,          class:^(Wiremix)$
windowrulev2 = center,                class:^(Wiremix)$

windowrulev2 = float,                 class:^(maccel)$
windowrulev2 = size 90% 96%,          class:^(maccel)$
windowrulev2 = center,                class:^(maccel)$

windowrulev2 = float,                 class:org.Waytrogen.Waytrogen
windowrulev2 = size 89% 89%,          class:org.Waytrogen.Waytrogen
windowrulev2 = center,                class:org.Waytrogen.Waytrogen

windowrulev2 = float,                 class:^(waytrogen)$
windowrulev2 = center,                class:waytrogen

windowrulev2 = float,                 class:^(nm-connection-editor)$
windowrulev2 = size 45%,              class:^(nm-connection-editor)$
windowrulev2 = center,                class:^(nm-connection-editor)$

windowrulev2 = float,                 class:^(blueman-manager)$
windowrulev2 = size 45%,              class:^(blueman-manager)$
windowrulev2 = center,                class:^(blueman-manager)$

windowrulev2 = float,                 class:^(net.davidotek.pupgui2)
windowrulev2 = size 45%,              class:^(net.davidotek.pupgui2)
windowrulev2 = center,                class:^(net.davidotek.pupgui2)

# ───────────────────────────────────────────────────────────────────────────────
# MANUAL SETUP
# ───────────────────────────────────────────────────────────────────────────────

# Sunshine / Moonlight Fix
# Configure in Sunshine Web-UI → “Do Command” (on connect):
#   /usr/bin/env bash -lc "$HOME/.config/hypr/scripts/sunshine-moonlight-fix.sh"
# READ SCRIPT:        cat ~/.config/hypr/scripts/sunshine-moonlight-fix.sh

# ───────────────────────────────────────────────────────────────────────────────
# .DESKTOP NOTES
# ───────────────────────────────────────────────────────────────────────────────

# ~/.local/share/applications/*

# Steam Splitratio Script
# Set split ratio between Steam and Friends List (runs once at startup with a timeout of 300s)
# READ SCRIPT:        cat ~/.config/hypr/scripts/splitratio_steam.sh
# .desktop override:  Exec=sh -lc 'pgrep -x steam >/dev/null && exit 0; /usr/bin/steam --disable-gpu "$@" & ALLOW_WAIT=1 "$HOME/.config/hypr/scripts/splitratio_steam.sh" &' _ %U
# Check file:         cat ~/.local/share/applications/steam.desktop
